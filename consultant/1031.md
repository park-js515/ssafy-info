# 리팩토링

> 언제 해야 할까?

- 기능 구현이 우선이고, 정상 작동되는지 확인한 후에 진행한다.
- 한 번에 하나의 작업에만 집중하고, 동시에 진행하지 않는다.

> 리팩토링의 유형

- 신규 기능 추가를 대비한 "준비를 위한 리팩토링"
- 높은 가독성을 고려한 "이해를 윟나 리팩토링"

> 준비를 위한 리팩토링

- 목적: 신규 기능을 추가하기 전에, 코드를 쉽게 추가할 수 있도록 대비
  - 추가되는 코드가 기존 구조에 녹여지기 어렵다면
  - 해당 구조를 다듬어서 새로운 기능을 쉽게 적용할 수 있도록 만들어주자
- 예시1
  - 동일 코드가 반복적으로 작성되어 있다면,
  - 별도의 function으로 만들고, 이를 호출하는 방식으로 관심사 분리
- 예시2
  - 의미가 유사한 function이 2개 이상 존재하면..
  - 매개 변수를 이용하는 것으로 function 통합
  - 이럴 경우, 추가적인 소스 수정 및 배포 불필요(코딩 최소화하여, 현업의 요구사항 충족)
- 예시3
  - 모든 분기마다 동일 로직을 구현했다면
  - 분기문 밖으로 해당 로직을 이동시켜, 한 번만 작성한다.

> 이해를 위한 리팩토링

- 목적: 코드의 의도를 쉽게 이해할 수 있도록, 가독성을 높인다.

  - 코드를 수정하기 위한 전제 조건은 그 코드가 무슨 일을 하는지 올바로 파악하는 것
  - 협업하는 동료와 보는 코드는 의도가 명확하게 드러나야 함
  - 더 좋은 설계를 위해서는 사소한 것부터 명확하게 만드는 것이 중요

- 예시1: 모호한 변수명
  - a, b, c 등 의도를 알 수 없는 모호한 변수명이라면..
  - 변수명을 직관적으로 선언해줄 필요가 있다
  - 좋은 프로그래머는 사람이 이해할 수 있는 코드를 작성하는 것
- 예시2: 길어지는 표현식
  - 하나의 표현식이 너무 길어지는 경우에는..
  - 표현식 또는 해당 부분의 결과를 의도 파악이 가능한 개별 변수로 선언해야 한다.
- 예시3: 변수가 한 번만 변경
  - 변경되는 변수가 하나 뿐이라면
  - 해당 변수가 원래 표현식과 다를 바 없을 때에는, 변수 선언 대신 Inline해서 return 처리한다.

> 성능개선 vs 리팩토링

- 성능 개선과 리팩토링의 작업 패턴은 유사
- 그러나 성능 개선은 속도를 높이기 위함이 목적이고
- 리팩토링은 코드를 깨끗하게 만들기 위함

> 왜 리팩토링이 필요한가?

- 코드 리팩토링을 왜 해야 하나요?
- 시간 낭비하는 거 아닌가요? 라고 묻는다면?
- 그 이유는 :"깨끗하고 좋은 코드를 만들기 위해서"이다.

- 설계에 대한 고민없이 작성되는 코드는, 초반에는 개발 속도가 빠르지만
- 코드 구조는 한 번 엉망이 되면, 시간이 갈수록 더 엉망진창이 된다
- 새로운 기능을 추가할수록, 개발 속도가 점점 더뎌짐

- 반면, 좋은 설계의 프로그램은 시간이 갈수록 개발 생산성이 높아진다.

> 궁극적 목적

- Econmics(경제성)
  - 적은 인력으로 짧은 시간 많은 기능을 개발하기 위해
