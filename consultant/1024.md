# 메시지 큐(Message Queue, MQ)

> 좋은 웹 AP가 가져야 할 것들

- 성능
- 안정(신뢰)성
- 보안
- ex
  - Spring Boot, Django, nodeJS

> 무인 주차 정산 시스템

- 입차 시 카메라로 차량번호 인식
- 요금 할인 대상 차량 여부 확인(REST API)
- 출차 시 주차 요금 자동 정산
- 경차, 저공해 차량 여부 체크
- 장애우, 유공자 여부 체크
- <font color="red">너무나 오래 걸리는 시간</font>
  - 비동기 처리로 이를 개선

> 응답 시간 - 비동기 처리

- Synchronous / Asnychronous는 중요 개념
- 업무 이해에 기반한 적절한 비동기 처리
- 사용 language, 프레임워크 환경에서 제공하는 것부터 고려

> 메시지 큐

- 메시지 버퍼 역할을 하며 비동기적으로 전송
- 서비스(서버)간 느슨한 결합이 가능
- 메시지 무손실을 보장

> 타 서비스를 호출하기에는...

- HTTP는 꽤나 heavy한 메시지 구조를 가짐
- 짧은 메시지를 빈번하게 전송한다면 명백한 낭비

> RabbitMQ

- 기본 활용만으로도 많은 장점
- 단순 사용 경험보다는 어떠한 환경에서 어떤 이유로 적용했는지에 대한 가설을 세워 본 경험이 중요
- 손쉽게 작업을 처리하는 별도의 서비스의 scale-out이 기능
- 이런 흐름을 직접 구축하려면 생각보다 고려해야 할 것들이 많음

- RabbmitMQ의 특징
  - 다양한 클라이언트 라이브러리 제공
  - 메시지 디스크 저장 설정 가능
  - 메시지 무손실(영속성) 보장
  - 고가용성을 위한 클러스터 설정 가능
  - 접근성 좋은 Webi UI 제공

> 마무리

- 서비스를 분리하고 관계를 맺으려 한다면..
- 먼저 메시지 큐 활용법보다 적합한 사용 시나리오를 찾기 위해 노력해보자
- 비동기 처리를 통한 성능 향상과 서비스(서버)간 느슨한 결합이 가져다 주는 장점을 경험해보자
- MSA를 고려하고 있다면 적극적/긍정적으로 고려해보자.
